---
title: Git基础
date: 2016-11-07 09:52:17
updated: 2016-11-09 11:36:17 
tags:
- git基础
comments: true
categories:
- 工具箱
---

>## 2.1 Git 基础- 获取Git仓库

* 方法一：在现有项目或目录下导入所有文件到git中。
  ` git init `
  * 该命令创建一个名为.git的子目录，含有初始化的Git仓库中所有的必须文件，这些文件是git仓库的骨干。我们仅仅是做了一个初始化的操作，项目里的文件还没有被跟踪。
  * 如果一个已经存在文件的文件夹（非空文件夹）中初始化Git仓库来进行版本控制的话，你应该开始跟踪这些文件并提交。可通过`git add`命令来实现对指定文件的跟踪，然后执行`git commit`提交：
  ```
  git add *.c
  git add LICENSE
  git commit -m `initial project version`
  ```

* 方法二：从一个服务器克隆一个现有的git仓库。
  * 如果想获得一份已经存在了的git仓库拷贝，就要用到`git clone`命令，该命令默认配置下远程git仓库中的每一个文件的每一个版本都将被拉取下来。克隆仓库的命令格式是`git clone [url]`。比如要克隆git的可链接库libgit2，可以用下面的命令：`git clone https://github.com/libgit2/libgit2` 。这会在当前目录下创建一个名为libgit2的目录，并在这个目录下初始化一个.git文件夹，从远程仓库拉取下所有数据存入.git 文件夹,然后从中读取最新版本的文件的拷贝。克隆远程仓库自定义本地仓库名字：`git clone https://github.com/libgit2/libgit2 mylibgit`
Git支持多种数据传输协议：git://协议或者使用ssh传输协议，比如：`user@server:path/to/repo.git`

>## 2.2 Git基础- 记录每次更新到仓库  

* 工作目录下状态：
  * 已跟踪: 被纳入了版本控制的文件 
  * 未跟踪
检查当前文件状态 `git status`

* 跟踪新文件
 * `git add (files)` 如果是目录的路径，该命令将递归地跟踪该目录下的所有文件

* 暂存已修改文件
已跟踪文件的内容发生了变化，但还没有放到暂存区，要暂存这次更新，需要运行`git add`命令。可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。可以理解为“添加内容到下一次提交中”。

* 状态简览

```
git status -s
 M README
MM Rakefile
A  lib/git.rb
M  lib/simplegit.rb
?? LICENSE.txt

```
新添加的未跟踪文件前面有 ?? 标记，新添加到暂存区中的文件前面有 A 标记，修改过的文件前面有 M 标记。 你可能注意到了 M 有两个可以出现的位置，出现在右边的 M 表示该文件被修改了但是还没放入暂存区，出现在靠左边的 M 表示该文件被修改了并放入了暂存区。

* 忽略文件
 * 一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。 通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。 在这种情况下，我们可以创建一个名为 .gitignore 的文件，列出要忽略的文件模式。

 * 文件 .gitignore 的格式规范如下：
  * 所有空行或者以 ＃ 开头的行都会被 Git 忽略。
  * 可以使用标准的 glob 模式匹配。
  * 匹配模式可以以（/）开头防止递归。
  * 匹配模式可以以（/）结尾指定目录。
  * 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。
所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。 星号（*）匹配零个或多个任意字符；[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的数字）。 使用两个星号（*) 表示匹配任意中间目录，比如a/**/z 可以匹配 a/z, a/b/z 或 a/b/c/z等。

* 查看已暂存和未暂存的修改
`git diff`

* 提交更新
`git commit`

* 跳过使用暂存区域
  `git commit -a` 自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 
